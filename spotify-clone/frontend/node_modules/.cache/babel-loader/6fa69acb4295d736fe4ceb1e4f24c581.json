{"ast":null,"code":"const axios = require('axios');\n\nconst api_key = process.env.REACT_APP_YOUTUBE_API_KEY;\nconst baseURL = 'https://www.googleapis.com/youtube/v3'; // sort channels by the number of suscribers in descending order\n\nexport const sortChannelsBySubscriberCount = channels => {\n  const sortedChannels = channels.sort((a, b) => {\n    if (Number(a.statistics.subscriberCount) < Number(b.statistics.subscriberCount)) {\n      return 1;\n    }\n\n    if (Number(a.statistics.subscriberCount) > Number(b.statistics.subscriberCount)) {\n      return -1;\n    }\n\n    return 0;\n  });\n  return sortedChannels;\n}; // filter channels that show suscriber count only \n\nexport const filterChannelsByVisibleSubscriberCount = channels => {\n  return channels.filter(channel => channel.statistics.hiddenSubscriberCount === false);\n}; // searches channels based on the query term \n\nexport const searchChannels = name => {\n  return axios.get(`${baseURL}/search?key=${api_key}&q=${name}&type=channel&part=snippet&maxResults=25`).then(response => {\n    // console.log(response);\n    const ids = response.data.items.map(item => {\n      return item.id.channelId;\n    }); // console.log(ids);\n\n    const channels = ids.map(id => {\n      return axios.get(`${baseURL}/channels?key=${api_key}&part=snippet,contentDetails,statistics&id=${id}`).then(result => {\n        // console.log(result);\n        return result.data;\n      });\n    });\n    const channelsData = Promise.all(channels).then(data => {\n      console.log(data);\n      const channelDataDetails = data.map(detail => {\n        // console.log(detail);\n        // console.log(detail.items);\n        // console.log(detail.items[0]);\n        return detail.items[0];\n      });\n      return channelDataDetails;\n    }); // console.log(channelsData);\n\n    return channelsData;\n  });\n}; // retrieves all the videos from a channel\n\nexport const getChannelVideos = async channel => {\n  // console.log(\"get channel videos\", channel);\n  const uploadID = channel.contentDetails.relatedPlaylists.uploads; // console.log(\"uploads\", uploadID);\n\n  const response = await axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}`);\n  const results = response.data;\n  let pageToken = results.nextPageToken;\n  const allVideos = results.items; // console.log(allVideos);\n\n  while (pageToken) {\n    const nextPageResponse = await axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}&pageToken=${pageToken}`);\n    console.log(\"next page\", nextPageResponse);\n    const nextPageResults = nextPageResponse.data.items;\n    console.log(nextPageResults);\n    nextPageResults.map(item => {\n      allVideos.push(item);\n    });\n    console.log(allVideos);\n    console.log(pageToken);\n    pageToken = nextPageResponse.data.nextPageToken;\n  } // return axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}`)\n  // .then(response => {\n  //   console.log(response);\n  //   const results = response.data; \n  //   const totalVideos = results.pageInfo.totalResults;\n  //   let pageToken = results.nextPageToken;\n  //   const allVideos = results.items; \n  // axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}&pageToken=${pageToken}`)\n  // .then(response => {\n  //   console.log(response);\n  //   pageToken = response.data.nextPageToken;\n  //   axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}&pageToken=${pageToken}`)\n  //   .then(response => {\n  //     console.log(response);\n  //   })\n  // })\n  // while (pageToken) {\n  //   const nextPageResponse = getAllVideosFromPage(uploadID, pageToken);\n  //   console.log(nextPageResponse.data);\n  //   console.log(pageToken);\n  //   pageToken = nextPageResponse.data.nextPageToken; \n  // }\n\n\n  console.log(allVideos); // console.log(response);\n\n  return response; // })\n};\n\nconst getAllVideosFromPage = (uploadID, pageToken) => {\n  return axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}&pageToken=${pageToken}`).then(response => {\n    return response;\n  });\n};","map":{"version":3,"sources":["/Users/ianlam/projects-after-lighthouse/spotify-clone/spotify-clone/src/components/youtube/youtube.js"],"names":["axios","require","api_key","process","env","REACT_APP_YOUTUBE_API_KEY","baseURL","sortChannelsBySubscriberCount","channels","sortedChannels","sort","a","b","Number","statistics","subscriberCount","filterChannelsByVisibleSubscriberCount","filter","channel","hiddenSubscriberCount","searchChannels","name","get","then","response","ids","data","items","map","item","id","channelId","result","channelsData","Promise","all","console","log","channelDataDetails","detail","getChannelVideos","uploadID","contentDetails","relatedPlaylists","uploads","results","pageToken","nextPageToken","allVideos","nextPageResponse","nextPageResults","push","getAllVideosFromPage"],"mappings":"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","sourcesContent":["const axios = require('axios');\nconst api_key = process.env.REACT_APP_YOUTUBE_API_KEY;\nconst baseURL = 'https://www.googleapis.com/youtube/v3';\n\n\n// sort channels by the number of suscribers in descending order\nexport const sortChannelsBySubscriberCount = (channels) => {\n  const sortedChannels =  channels.sort((a,b) => {\n    if (Number(a.statistics.subscriberCount) < Number(b.statistics.subscriberCount)) {\n      return 1;\n    }\n    if (Number(a.statistics.subscriberCount) > Number(b.statistics.subscriberCount)) {\n      return -1;\n    }\n    return 0; \n  });\n  return sortedChannels;\n}\n\n// filter channels that show suscriber count only \nexport const filterChannelsByVisibleSubscriberCount = (channels) => {\n  return channels.filter((channel) => channel.statistics.hiddenSubscriberCount === false);\n}\n\n// searches channels based on the query term \nexport const searchChannels = (name) => {\n  return axios.get(`${baseURL}/search?key=${api_key}&q=${name}&type=channel&part=snippet&maxResults=25`)\n  .then(response => {\n\n    // console.log(response);\n    \n    const ids = response.data.items.map((item) => {\n      return item.id.channelId;\n    }) \n\n    // console.log(ids);\n\n    const channels = ids.map((id) => {\n      return axios.get(`${baseURL}/channels?key=${api_key}&part=snippet,contentDetails,statistics&id=${id}`)\n      .then(result => {\n        // console.log(result);\n        return result.data;\n      });\n    })\n\n    const channelsData = Promise.all(channels).then(data => {\n      console.log(data);\n      const channelDataDetails = data.map((detail) => {\n        // console.log(detail);\n        // console.log(detail.items);\n        // console.log(detail.items[0]);\n        return detail.items[0];\n      })\n\n      return channelDataDetails;\n    });\n\n    // console.log(channelsData);\n\n    return channelsData;\n  });\n}\n\n// retrieves all the videos from a channel\nexport const getChannelVideos = async (channel) => {\n  // console.log(\"get channel videos\", channel);\n  const uploadID = channel.contentDetails.relatedPlaylists.uploads;\n  // console.log(\"uploads\", uploadID);\n\n  const response = await axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}`);\n\n  const results = response.data;\n  let pageToken = results.nextPageToken; \n\n\n  const allVideos = results.items\n  // console.log(allVideos);\n\n\n  while (pageToken) {\n    const nextPageResponse = await axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}&pageToken=${pageToken}`)\n    \n    console.log(\"next page\", nextPageResponse);\n    const nextPageResults = nextPageResponse.data.items;\n    console.log(nextPageResults);\n    nextPageResults.map((item) => {\n      allVideos.push(item);\n    });\n    console.log(allVideos);\n    console.log(pageToken);\n    pageToken = nextPageResponse.data.nextPageToken; \n\n  }\n\n\n  // return axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}`)\n  // .then(response => {\n  //   console.log(response);\n  //   const results = response.data; \n  //   const totalVideos = results.pageInfo.totalResults;\n  //   let pageToken = results.nextPageToken;\n\n  //   const allVideos = results.items; \n\n\n    // axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}&pageToken=${pageToken}`)\n    // .then(response => {\n    //   console.log(response);\n    //   pageToken = response.data.nextPageToken;\n\n    //   axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}&pageToken=${pageToken}`)\n    //   .then(response => {\n    //     console.log(response);\n    //   })\n    // })\n\n\n    // while (pageToken) {\n    //   const nextPageResponse = getAllVideosFromPage(uploadID, pageToken);\n    //   console.log(nextPageResponse.data);\n    //   console.log(pageToken);\n    //   pageToken = nextPageResponse.data.nextPageToken; \n    // }\n\n\n\n\n\n    console.log(allVideos);\n    // console.log(response);\n\n\n    return response;\n  // })\n}\n\n\nconst getAllVideosFromPage = (uploadID, pageToken) => { \n  return axios.get(`${baseURL}/playlistItems?part=snippet,contentDetails&playlistId=${uploadID}&maxResults=50&key=${api_key}&pageToken=${pageToken}`)\n  .then(response => {\n    return response;\n  })\n}\n"]},"metadata":{},"sourceType":"module"}